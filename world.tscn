[gd_scene load_steps=20 format=3 uid="uid://b1fi0cr5rt1a"]

[ext_resource type="Script" path="res://world.gd" id="1_b0yrt"]
[ext_resource type="PackedScene" uid="uid://dnxsi0xc3piik" path="res://player_ship/ship.tscn" id="1_lxr0n"]
[ext_resource type="PackedScene" uid="uid://fwd72kkqeyh4" path="res://effects/space_background.tscn" id="2_xl0g5"]
[ext_resource type="PackedScene" uid="uid://c2clu11i26k4n" path="res://ui/Combat/health-bar.tscn" id="4_qygu7"]
[ext_resource type="PackedScene" uid="uid://du2tc0co6bpt6" path="res://enemies/EnemySpawner.tscn" id="4_r5s5m"]
[ext_resource type="Shader" path="res://ui/Combat/health_bar.gdshader" id="4_vqkve"]
[ext_resource type="Resource" uid="uid://b1004d1tnt5bo" path="res://abilities/Slash/Slash.tres" id="5_0gajn"]
[ext_resource type="Resource" uid="uid://cb75sbqw8ansl" path="res://abilities/Blink/Blink.tres" id="5_75y8r"]
[ext_resource type="Script" path="res://ui/Combat/ScoreContainer.gd" id="6_cjt2l"]
[ext_resource type="PackedScene" uid="uid://c0sn4dc1al4nd" path="res://ui/Combat/AbilityBar.tscn" id="6_gt76b"]
[ext_resource type="Script" path="res://components/world_component.gd" id="6_k5rk1"]
[ext_resource type="Resource" uid="uid://ir2ljixcq2o" path="res://abilities/Explode/Explode.tres" id="6_udhgh"]
[ext_resource type="Resource" uid="uid://c0j0oaqb8xqup" path="res://game_stats.tres" id="7_vgyod"]
[ext_resource type="Resource" uid="uid://dhcubdlycg5oy" path="res://abilities/Shield/Shield.tres" id="8_hoaba"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ionaa"]
resource_local_to_scene = true
shader = ExtResource("4_vqkve")
shader_parameter/normalized_health_amount = 1.0
shader_parameter/fill_color = Vector4(0.66, 0.06, 0.06, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_sacw6"]
frequency = 1.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_6tcsk"]
resource_local_to_scene = true
width = 30
height = 30
noise = SubResource("FastNoiseLite_sacw6")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yd13w"]
resource_local_to_scene = true
shader = ExtResource("4_vqkve")
shader_parameter/normalized_health_amount = 1.0
shader_parameter/fill_color = Vector4(0.66, 0.06, 0.06, 1)

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_vr2yf"]
resource_local_to_scene = true
width = 30
height = 30
noise = SubResource("FastNoiseLite_sacw6")

[node name="World" type="Node2D"]
script = ExtResource("1_b0yrt")

[node name="WorldUI" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="BottomBar" type="HBoxContainer" parent="WorldUI"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -80.0
offset_top = -30.0
offset_right = 80.0
grow_horizontal = 2
grow_vertical = 0

[node name="HealthBar" parent="WorldUI/BottomBar" instance=ExtResource("4_qygu7")]
material = SubResource("ShaderMaterial_ionaa")
layout_mode = 2
texture = SubResource("NoiseTexture2D_6tcsk")
fill_color = Vector4(0.66, 0.06, 0.06, 1)

[node name="AbilityBar" parent="WorldUI/BottomBar" node_paths=PackedStringArray("ship") instance=ExtResource("6_gt76b")]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
ship = NodePath("../../../Ship")

[node name="ResourceBar" parent="WorldUI/BottomBar" instance=ExtResource("4_qygu7")]
material = SubResource("ShaderMaterial_yd13w")
layout_mode = 2
texture = SubResource("NoiseTexture2D_vr2yf")
fill_color = Vector4(0.66, 0, 0.66, 1)

[node name="ScoreContainer" type="HBoxContainer" parent="WorldUI"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -29.0
offset_right = 30.0
offset_bottom = 20.0
grow_horizontal = 2
script = ExtResource("6_cjt2l")
game_stats = ExtResource("7_vgyod")

[node name="ScoreLabel" type="Label" parent="WorldUI/ScoreContainer"]
layout_mode = 2
text = "Score:"

[node name="Score" type="Label" parent="WorldUI/ScoreContainer"]
layout_mode = 2

[node name="Ship" parent="." node_paths=PackedStringArray("ability_bar") instance=ExtResource("1_lxr0n")]
position = Vector2(240, 231)
ability_bar = NodePath("../WorldUI/BottomBar/AbilityBar")
abilities = Array[Resource("res://abilities/AbilityData.gd")]([ExtResource("5_75y8r"), ExtResource("6_udhgh"), ExtResource("5_0gajn"), ExtResource("8_hoaba")])

[node name="EnemySpawner" parent="." instance=ExtResource("4_r5s5m")]
position = Vector2(8, -8)

[node name="SpaceBackground" parent="." instance=ExtResource("2_xl0g5")]

[node name="WorldComponent" type="Node" parent="."]
script = ExtResource("6_k5rk1")

[connection signal="child_exiting_tree" from="Ship" to="Ship" method="_on_child_exiting_tree"]
[connection signal="tree_exited" from="Ship" to="Ship" method="_on_tree_exited"]
[connection signal="tree_exiting" from="Ship" to="Ship" method="_on_tree_exiting"]
